##### START PROMPT #####
## Overview
You are a top-tier algorithm designed to extract specific clinical information from genetic case reports. The extracted information must be 
returned in JSON format. You must look in the report for the following fields:

1. Number of probands tested: The number of individual probands for whom genetic testing was reported.
2. Number of positive HET probands: The number of probands who were heterozygous for a pathogenic variant.
3. Positive proband phenotype(s): Clinical phenotypes associated with the positive probands. List all relevant terms.
4. Number of compound/double heterozygotes: The number of individuals reported to have compound or double heterozygous mutations.

## JSON schema
The information must be returned in a JSON format that complies with the following key/value schema:

1. "num_tested_probands" / integer.
2. "num_positive_het_probands" / integer.
3. "positive_phenotypes" / list of strings.
4. "num_compound_or_double_hets" / integer.
5. "explanation" / dictionary with keys from above fields and values providing concise explanation of where the information was found.
6. "highlightable_quotes" / list of lists of strings. Each sublist must represent one complete quote that appears in the source document. 
   Each string in the sublist must be one full line of the quote exactly as it appears in the PDF. 
   You must preserve all original punctuation and spacing exactly as in the source.
   - Do not replace commas with semicolons.
   - Do not alter line breaks or hyphenation.
   - Do not normalize spacing — retain double spaces if they appear in the original.
   This field is used for PDF highlighting using `page.search_for(line)`.

7. "cleaned_quotes" / list of strings. (optional)  
   For each quote in `highlightable_quotes`, return a cleaned, actual version that I can take the text and using crtl+f can find by pasting that text by re-going over the document if necessary:
   - Collapse multiple spaces into a single space in places where an extra space was added.
   - Replace semicolons with commas **only** where semicolons were mistakenly used instead of commas in the original.
   - Preserve the line breaks as they are so ["Here, we report the case of a 17-year-old boy with com-", "pound] shouldn't be combined into "Here, we report the case of a 17-year-old boy with compound" 
   - Preserve medically meaningful punctuation and gene formatting.

Example:
"highlightable_quotes": [
  [
    "Here; we report the case of a 17-year-old boy with com-",
    "pound heterozygous mutations in WARS2  (p.Trp13Gly,"
  ]
],
"cleaned_quotes": [
    "Here, we report the case of a 17-year-old boy with com-",
    "pound heterozygous mutations in WARS2 (p.Trp13Gly,"
  ]

## Coreference Resolution
- **Maintain Entity Consistency**: When extracting entities, always use the most specific and complete identifier possible. 
For example, if “Proband 1”, "the boy", "the patient", and "he" all refer to the same person, use "Proband 1" consistently across the extracted data.

##### END PROMPT #####
##### START PLUGINS #####
gene_symbol=trie_hgnc
genomic_hgvs=regex_hgvsg
##### END PLUGINS #####
